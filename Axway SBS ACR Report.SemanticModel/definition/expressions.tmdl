expression host_axway_qa = "10.128.128.78:5432" meta [IsParameterQuery=true, Type="Text", IsParameterQueryRequired=true]
	lineageTag: 1a5081f3-e224-48a7-b3f3-b3ca0fe43137
	queryGroup: Hosts

	annotation PBI_ResultType = Text

	annotation PBI_NavigationStepName = Navigation

expression host_sbs = "35mq6mhgpbxuhgzhwzexhy2ppu-qlzdwupkmqhefi3s7w7e2lzh7a.datawarehouse.fabric.microsoft.com" meta [IsParameterQuery=true, Type="Text", IsParameterQueryRequired=true]
	lineageTag: 617d4a32-4547-4656-a5ae-ef7f333a8d51
	queryGroup: Hosts

	annotation PBI_NavigationStepName = Navigation

	annotation PBI_ResultType = Text

expression host_sbs_qa = "35mq6mhgpbxuhgzhwzexhy2ppu-qlzdwupkmqhefi3s7w7e2lzh7a.datawarehouse.fabric.microsoft.com" meta [IsParameterQuery=true, Type="Text", IsParameterQueryRequired=true]
	lineageTag: 862dfd87-67fc-4f94-90bb-9f4a0b38cc61
	queryGroup: Hosts

	annotation PBI_NavigationStepName = Navigation

	annotation PBI_ResultType = Text

expression axway_acr_data =
		let
		    Source = Value.NativeQuery(PostgreSQL.Database(host_axway, "pncdb", [CreateNavigationProperties=false]), "SELECT c.employee_name,#(lf)       trim(regexp_replace(c.employee_name, '\s(?=[A-Z][a-z]).*$', ''))       AS last_name,#(lf)       trim(regexp_replace(c.employee_name, '^.*?\s(?=[A-Z][a-z])', '')) AS first_name,#(lf)       right(c.employee_id, 6) as employee_id,#(lf)       c.employee_id as employee_number,#(lf)       c.country,#(lf)       c.hire_date,#(lf)       c.job_title,#(lf)       c.job_grade,#(lf)       c.direct_manager,#(lf)       c.direct_manager_email,#(lf)       ef.compensation_manager,#(lf)       ef.compensation_manager_email,#(lf)       ef.general_manager,#(lf)       ef.general_manager_email,#(lf)       ef.executive,#(lf)       ef.executive_email,#(lf)       ef.ft_pct,#(lf)       c.currency,#(lf)       c.current_annual_base,#(lf)       c.current_market_pct_base,#(lf)       c.variable_type,#(lf)       c.current_annual_otv_amount,#(lf)       c.current_otv_pctofbase,#(lf)       c.current_ttc,#(lf)       c.current_market_pctofttc,#(lf)       tr.performance_rating,#(lf)       acr.promotion_correction,#(lf)       acr.new_job_title,#(lf)       acr.new_job_grade,#(lf)       c.requested_base_increase_pct,#(lf)       c.proposed_annual_base,#(lf)       c.proposed_mkt_base_pct,#(lf)       c.target_otv,#(lf)       c.proposed_otv_amount,#(lf)       c.proposed_ttc,#(lf)       c.proposed_market_pctofttc,#(lf)       acr.bonus_pct as bonus_pct_mbo,#(lf)       acr.comment,#(lf)       ef.gender,#(lf)       c.budget_on_base,#(lf)       c.budget_on_base_eur,#(lf)       c.total_ttc_budget_local as total_ttc_budget,#(lf)       c.total_ttc_budget as total_ttc_budget_eur,#(lf)       c.spent_on_base,#(lf)       c.spent_on_base_eur,#(lf)       c.spent_per_employee_local as spent_on_ttc,#(lf)       c.spent_per_employee as spent_on_ttc_eur,#(lf)       c.budget_on_base_eur - c.spent_on_base_eur as remaining_on_base_eur,#(lf)       c.remaining_per_employee as remaining_ttc_eur,#(lf)       c.merit_eligible#(lf)FROM pncdb.eoy.calculations AS c#(lf)         LEFT JOIN eoy.bonus_calculations AS b ON c.employee_id = b.employee_id#(lf)         LEFT JOIN eoy.employee_file ef ON c.employee_id = ef.employee_id#(lf)         LEFT JOIN eoy.employee_acr AS acr ON acr.employee_id = c.employee_id#(lf)         LEFT JOIN eoy.talent_review_cy AS tr ON tr.emp_number = c.employee_id#(lf)", null, [EnableFolding=true]),
		    #"Added Custom" = Table.AddColumn(Source, "company", each "Axway"),
		    #"Changed Type" = Table.TransformColumnTypes(#"Added Custom",{{"last_name", type text}, {"first_name", type text}}),
		    #"Added Custom1" = Table.AddColumn(#"Changed Type", "performance_adjusted", each if [performance_rating] = null then "N/A" else [performance_rating])
		in
		    #"Added Custom1"
	lineageTag: f5826f4a-7937-4eb5-bbf8-777f4ab241e8

	annotation PBI_NavigationStepName = Navigation

	annotation PBI_ResultType = Table

expression sbs_acr_data =
		let
		    Source = Sql.Database(host_sbs, "sbs_acr_data"),
		    dbo_view_sbs_acr_data = Source{[Schema="dbo",Item="view_sbs_acr_data"]}[Data],
		    #"Added Custom" = Table.AddColumn(dbo_view_sbs_acr_data, "company", each "SBS"),
		    #"Changed Type" = Table.TransformColumnTypes(#"Added Custom",{{"last_name", type text}, {"first_name", type text}})
		in
		    #"Changed Type"
	lineageTag: 99506f0a-5969-43e3-850b-d145421d78ba

	annotation PBI_NavigationStepName = Navigation

	annotation PBI_ResultType = Table

expression host_axway = "10.128.128.78:5432" meta [IsParameterQuery=true, Type="Text", IsParameterQueryRequired=true]
	lineageTag: ff28e6aa-9ae6-4ca1-ba46-ae1981d6bc0e
	queryGroup: Hosts

	annotation PBI_NavigationStepName = Navigation

	annotation PBI_ResultType = Text

expression currencies =
		let
		    Source = Table.FromRows(Json.Document(Binary.Decompress(Binary.FromText("bZS/btswEMZfhVAzBkZeQf6fyJYNKUYTRxkYibEJM5RBSTWcMcgT9BWKDi0KFGinoujSop0zJmufpHdHW6aTDqKgu59O33086uLC60wi79D7e/cJ1k5lcvvw6vCocXTkXR5eeM1eCLGH7w9f4Nas1IwbyTVT4g08W45htkF0OwggvDCwtLmWxZwtTK7FDl0YCx7HNXicCsV1JlNI/vqquQsT2+p3IWbXeCWLgl0brtOaSxKWYDrxCA9HdekwNysxQ70vZBA6HmBzt7/vYB3nCvXeqrxc70DMIRmNkFRCwhrlN9AbmVDti4D8RkQ0aZKVP5CvigJxU10pRwMmEY07td54JbKtaS996DXHEPv5jsRWOitYUQqjpJ5R2Nm0SdyG0AFcEy1LkbG45KUoWDtXiuOHDtwdjgYoEumm4bdSkVbBFUWZQ7Z8LNvyEW1xzTMks21NiLuwH/Yg+OctboMo5yCUo2Rfl1IpAS/OKqkyYQhyXxxQm0/3jad7uA/EFdeiEGyJLe88sXn6UAdV2bVzIw0vJcukmfMbCCSYSDyn/JmPc9RtdX3U3PWfDRMliBt1LfBfjG2xIXnS7sMyzE2epmjJ9uvOaLT7m8mY+nji8Irzqpwzfm0kvgTlsb3IteI0xOKPnxuPH+F+WsGJIsulJsc3UmyerJiQFbg/flWUhqu9HfIn+9sZnuPgvMcG55JMXldcU8zl+gFW7QdYtp/rGQtwqasmmNqz+Di0P5VveLp1Zmd/KYQNuqVPxrWEE760G70WLyUMz8m0IbrMFV/b8wSTP5MlJVw4nG6nPxQrNoVJBmt3esPpngtxD+kY8RgK8mVuhNtc3NtvLoheUx8f6h0M4A2Qs8q1TbjVz8abacOZ7hqh0zlb8lRew+/u2UQRdHn5Dw==", BinaryEncoding.Base64), Compression.Deflate)), let _t = ((type nullable text) meta [Serialized.Text = true]) in type table [#"Currency code" = _t, #"Currency symbol" = _t, Currency = _t, Format = _t]),
		    #"Changed Type" = Table.TransformColumnTypes(Source,{{"Currency code", type text}, {"Currency symbol", type text}, {"Currency", type text}, {"Format", type text}}),
		    #"Sorted Rows" = Table.Sort(#"Changed Type",{{"Currency code", Order.Ascending}})
		in
		    #"Sorted Rows"
	lineageTag: e47dbd84-008a-480b-9efd-989524d225fa

	annotation PBI_NavigationStepName = Navigation

	annotation PBI_ResultType = Table

